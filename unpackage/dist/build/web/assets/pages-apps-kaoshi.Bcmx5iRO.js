import{m as s,v as t,x as e,j as a,s as i,c as l,w as o,i as c,o as n,a as d,f as r,e as u,b as p,r as h,F as f,z as k,n as m,P as x,G as g,t as y}from"./index-HXBhxmPW.js";import{b as _}from"./base.CIiHcDGk.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const v=b({data:()=>({kaoshi:""!=s("kaoshi")?JSON.parse(s("kaoshi")):"",isload:!1,ispop:!1,tern:"3",year:"2023",yearlist:[{text:"2024-2025",id:"2024"},{text:"2023-2024",id:"2023"},{text:"2022-2023",id:"2022"},{text:"2021-2022",id:"2021"},{text:"2020-2021",id:"2020"}],ternlist:[{text:"学期一",id:"3"},{text:"学期二",id:"12"},{text:"学期三",id:"16"}]}),methods:{changevalue(s){console.log(s.detail.value),this.year=this.yearlist[s.detail.value[0]].id,this.tern=this.ternlist[s.detail.value[1]].id},openpop(){1!=this.isload&&(this.ispop=!0)},get(){this.isload||(this.isload=!0,this.ispop=!1,console.log(this.tern,this.year),t({url:_.baseUrl+"kwgl/kscx_cxXsksxxIndex.html?doType=query&xnm="+this.year+"&xqm="+this.tern+"&queryModel.showCount=100",success:s=>{if(null!=s.data.length)return e({title:"登录失效，请重新登陆",duration:2e3,position:"center"}),this.isload=!1,void a({url:"/pages/login/login"});console.log(s.data.items);var t=[];s.data.items.forEach((s=>{t.push({kcmc:s.kcmc,kssj:s.kssj,cdmc:s.cdmc})})),console.log(t,this.year,this.tern),this.kaoshi=t,i("kaoshi",JSON.stringify(t)),this.isload=!1},fail(){this.isload=!1,e({title:"加载失败了",duration:2e3,position:"center"})}}))}},mounted(){console.log(this.chengji)}},[["render",function(s,t,e,a,i,_){const b=c,v=x,j=g;return n(),l(b,{class:"page"},{default:o((()=>[d(b,{class:"topbox"},{default:o((()=>[d(b,{class:"title"},{default:o((()=>[r("考场查询"),u("i",{class:"bi bi-caret-right-fill"})])),_:1})])),_:1}),d(b,{class:"appbox"},{default:o((()=>[(n(!0),p(f,null,h(i.kaoshi,(s=>(n(),l(b,{style:m({color:s.cj<60?"red":""}),class:"item"},{default:o((()=>[d(b,{class:"kcmc"},{default:o((()=>[r(y(s.kcmc),1)])),_:2},1024),d(b,{class:"cj"},{default:o((()=>[r(y(s.cdmc)+" "+y(s.kssj.slice(5)),1)])),_:2},1024)])),_:2},1032,["style"])))),256))])),_:1}),""==i.kaoshi?(n(),l(b,{key:0,class:"tip"},{default:o((()=>[r("点击获取数据"),u("i",{class:"bi bi-arrow-right"})])),_:1})):k("",!0),u("i",{onClick:t[0]||(t[0]=(...s)=>_.openpop&&_.openpop(...s)),style:m({animationName:i.isload?"rotate":""}),class:"bi bi-arrow-clockwise refresh"},null,4),i.ispop?(n(),l(b,{key:1,onClick:t[1]||(t[1]=s=>i.ispop=!1),class:"mask"})):k("",!0),d(b,{style:m({bottom:i.ispop?"0":"-310px"}),class:"popup"},{default:o((()=>[d(j,{class:"picker",onChange:_.changevalue,value:[0,0]},{default:o((()=>[d(v,null,{default:o((()=>[(n(!0),p(f,null,h(i.yearlist,((s,t)=>(n(),l(b,{key:t},{default:o((()=>[r(y(s.text),1)])),_:2},1024)))),128))])),_:1}),d(v,null,{default:o((()=>[(n(!0),p(f,null,h(i.ternlist,((s,t)=>(n(),l(b,{key:t},{default:o((()=>[r(y(s.text),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["onChange"]),u("div",{class:"buttonbox"},[u("div",{onClick:t[2]||(t[2]=(...s)=>_.get&&_.get(...s)),style:{"background-color":"#8d89ff",color:"white"},class:"button"},"查询"),u("div",{onClick:t[3]||(t[3]=s=>i.ispop=!1),class:"button"},"取消")])])),_:1},8,["style"])])),_:1})}],["__scopeId","data-v-0e57a71f"]]);export{v as default};
