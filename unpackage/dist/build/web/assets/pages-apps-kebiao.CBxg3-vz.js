import{m as l,v as s,x as t,j as e,s as i,c as a,w as o,i as c,o as r,a as n,f as p,t as d,e as u,b as h,r as f,F as b,n as k,B as x,C as g,z as m,P as _,G as y}from"./index-HXBhxmPW.js";import{b as v}from"./base.CIiHcDGk.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const q=j({data:()=>({kebiao:""!=l("kebiao")?JSON.parse(l("kebiao")):"",isload:!1,ispop:!1,tern:"3",xqj:v.getWeekInYear()-v.startWeek,year:"2023",yearlist:[{text:"2024-2025",id:"2024"},{text:"2023-2024",id:"2023"},{text:"2022-2023",id:"2022"},{text:"2021-2022",id:"2021"},{text:"2020-2021",id:"2020"}],ternlist:[{text:"学期一",id:"3"},{text:"学期二",id:"12"},{text:"学期三",id:"16"}]}),methods:{changevalue(l){console.log(l.detail.value),this.year=this.yearlist[l.detail.value[0]].id,this.tern=this.ternlist[l.detail.value[1]].id},openpop(){1!=this.isload&&(this.ispop=!0)},get(){this.isload||(this.isload=!0,this.ispop=!1,console.log(this.tern,this.year),s({url:v.baseUrl+"kbcx/xskbcx_cxXsgrkb.html?xnm="+this.year+"&xqm="+this.tern+"&kzlx=ck",success:l=>{if(null!=l.data.length)return t({title:"登录失效，请重新登陆",duration:2e3,position:"center"}),this.isload=!1,void e({url:"/pages/login/login"});var s=[],a=[];l.data.kbList.forEach((l=>{var t=l.jcs.split("-"),e=l.zcd.split(/[周,]/),i=[];if(4==e.length){if(1==e[0].split("-").length)i.push(e[0]-0);else for(let l=e[0].split("-")[0]-0;l<=e[0].split("-")[1]-0;)i.push(l-0),l++;if(1==e[2].split("-").length)i.push(e[2]-0);else for(let l=e[2].split("-")[0]-0;l<=e[2].split("-")[1]-0;)i.push(l-0),l++}else if("(单)"===e[1])if(1==e[0].split("-").length)i.push(e[0]-0);else for(let s=e[0].split("-")[0]-0;s<=e[0].split("-")[1]-0;)s%2==1&&i.push(s-0),s++;else if("(双)"===e[1])if(1==e[0].split("-").length)i.push(e[0]-0);else for(let s=e[0].split("-")[0]-0;s<=e[0].split("-")[1]-0;)s%2==0&&i.push(s-0),s++;else if(1==e[0].split("-").length)i.push(e[0]-0);else for(let s=e[0].split("-")[0]-0;s<=e[0].split("-")[1]-0;)i.push(s-0),s++;l.kccolor="";let o={kcmc:l.kcmc,color:Math.floor(360*Math.random())},c=a.findIndex((l=>l.kcmc===o.kcmc));-1!==c?l.kccolor=a[c].color:(a.push(o),l.kccolor=o.color),s.push({color:l.kccolor,kcmc:l.kcmc,cdmc:l.cdmc,xm:l.xm,xqj:l.xqj,ks:t[0],cd:t[1]-t[0]+1,zs:i})})),this.kebiao=s,i("kebiao",JSON.stringify(s)),console.log(s),this.isload=!1},fail(){this.isload=!1,t({title:"加载失败了",duration:2e3,position:"center"})}}))}}},[["render",function(l,s,t,e,i,v){const j=c,q=_,C=y;return r(),a(j,{class:"page"},{default:o((()=>[n(j,{class:"topbox"},{default:o((()=>[n(j,{class:"title"},{default:o((()=>[p("第"+d(i.xqj)+"周课程表",1),u("i",{class:"bi bi-caret-right-fill"})])),_:1})])),_:1}),n(j,{class:"appbox"},{default:o((()=>[n(j,{class:"top"},{default:o((()=>[n(j,null,{default:o((()=>[p("周一")])),_:1}),n(j,null,{default:o((()=>[p("周二")])),_:1}),n(j,null,{default:o((()=>[p("周三")])),_:1}),n(j,null,{default:o((()=>[p("周四")])),_:1}),n(j,null,{default:o((()=>[p("周五")])),_:1})])),_:1}),n(j,{class:"table"},{default:o((()=>[(r(!0),h(b,null,f(i.kebiao,(l=>x((r(),a(j,{style:k({top:8.33*(l.ks-1)+"%",left:20*(l.xqj-1)+"%",height:8.33*l.cd+"%"}),class:"item"},{default:o((()=>[n(j,{style:k({filter:"hue-rotate("+l.color+"deg)"}),class:"itembox"},{default:o((()=>[p(d(l.kcmc),1),u("br"),p(d(l.cdmc),1),u("br"),p(d(l.xm),1)])),_:2},1032,["style"])])),_:2},1032,["style"])),[[g,l.zs.includes(i.xqj)]]))),256)),n(j,{class:"tablebg1"}),n(j,{class:"tablebg2"}),n(j,{class:"tablebg3"})])),_:1})])),_:1}),u("i",{onClick:s[0]||(s[0]=(...l)=>v.openpop&&v.openpop(...l)),style:k({animationName:i.isload?"rotate":""}),class:"bi bi-arrow-clockwise refresh"},null,4),x(u("i",{onClick:s[1]||(s[1]=l=>i.xqj--),class:"bi left bi-chevron-left"},null,512),[[g,1!=i.xqj]]),x(u("i",{onClick:s[2]||(s[2]=l=>i.xqj++),class:"bi right bi-chevron-right"},null,512),[[g,20!=i.xqj]]),i.ispop?(r(),a(j,{key:0,onClick:s[3]||(s[3]=l=>i.ispop=!1),class:"mask"})):m("",!0),n(j,{style:k({bottom:i.ispop?"0":"-310px"}),class:"popup"},{default:o((()=>[n(C,{class:"picker",onChange:v.changevalue,value:[0,0]},{default:o((()=>[n(q,null,{default:o((()=>[(r(!0),h(b,null,f(i.yearlist,((l,s)=>(r(),a(j,{key:s},{default:o((()=>[p(d(l.text),1)])),_:2},1024)))),128))])),_:1}),n(q,null,{default:o((()=>[(r(!0),h(b,null,f(i.ternlist,((l,s)=>(r(),a(j,{key:s},{default:o((()=>[p(d(l.text),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["onChange"]),u("div",{class:"buttonbox"},[u("div",{onClick:s[4]||(s[4]=(...l)=>v.get&&v.get(...l)),style:{"background-color":"#8d89ff",color:"white"},class:"button"},"查询"),u("div",{onClick:s[5]||(s[5]=l=>i.ispop=!1),class:"button"},"取消")])])),_:1},8,["style"])])),_:1})}],["__scopeId","data-v-d5d0cce0"]]);export{q as default};
