import{m as s,v as t,x as e,j as a,s as i,c as l,w as o,i as c,o as n,a as r,f as d,e as u,b as p,r as h,F as g,z as f,n as x,P as m,G as y,t as _,A as b}from"./index-HXBhxmPW.js";import{b as j}from"./base.CIiHcDGk.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const v=k({data:()=>({chengji:""!=s("chengji")?JSON.parse(s("chengji")):"",isload:!1,ispop:!1,tern:"3",year:"2023",yearlist:[{text:"2024-2025",id:"2024"},{text:"2023-2024",id:"2023"},{text:"2022-2023",id:"2022"},{text:"2021-2022",id:"2021"},{text:"2020-2021",id:"2020"}],ternlist:[{text:"学期一",id:"3"},{text:"学期二",id:"12"},{text:"学期三",id:"16"}]}),methods:{changevalue(s){console.log(s.detail.value),this.year=this.yearlist[s.detail.value[0]].id,this.tern=this.ternlist[s.detail.value[1]].id},openpop(){1!=this.isload&&(this.ispop=!0)},get(){this.isload||(this.isload=!0,this.ispop=!1,console.log(this.tern,this.year),t({url:j.baseUrl+"cjcx/cjcx_cxXsgrcj.html?doType=query&xnm="+this.year+"&xqm="+this.tern+"&queryModel.showCount=100",success:s=>{if(null!=s.data.length)return e({title:"登录失效，请重新登陆",duration:2e3,position:"center"}),this.isload=!1,void a({url:"/pages/login/login"});console.log(s.data.items);var t=[];s.data.items.forEach((s=>{t.push({kcmc:s.kcmc,ksxz:s.ksxz,cj:s.bfzcj})})),console.log(t,this.year,this.tern),this.chengji=t,i("chengji",JSON.stringify(t)),this.isload=!1},fail(){this.isload=!1,e({title:"加载失败了",duration:2e3,position:"center"})}}))}},mounted(){console.log(this.chengji)}},[["render",function(s,t,e,a,i,j){const k=c,v=b,C=m,w=y;return n(),l(k,{class:"page"},{default:o((()=>[r(k,{class:"topbox"},{default:o((()=>[r(k,{class:"title"},{default:o((()=>[d("成绩查询"),u("i",{class:"bi bi-caret-right-fill"})])),_:1})])),_:1}),r(k,{class:"appbox"},{default:o((()=>[(n(!0),p(g,null,h(i.chengji,(s=>(n(),l(k,{style:x({color:s.cj<60?"red":""}),class:"item"},{default:o((()=>[r(k,{class:"kcmc"},{default:o((()=>[d(_(s.kcmc),1)])),_:2},1024),r(k,{class:"cj"},{default:o((()=>[d(_(s.cj),1),r(v,{class:"sub"},{default:o((()=>[d(_("重修补考"==s.ksxz?"(重)":""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["style"])))),256))])),_:1}),""==i.chengji?(n(),l(k,{key:0,class:"tip"},{default:o((()=>[d("点击获取数据"),u("i",{class:"bi bi-arrow-right"})])),_:1})):f("",!0),u("i",{onClick:t[0]||(t[0]=(...s)=>j.openpop&&j.openpop(...s)),style:x({animationName:i.isload?"rotate":""}),class:"bi bi-arrow-clockwise refresh"},null,4),i.ispop?(n(),l(k,{key:1,onClick:t[1]||(t[1]=s=>i.ispop=!1),class:"mask"})):f("",!0),r(k,{style:x({bottom:i.ispop?"0":"-310px"}),class:"popup"},{default:o((()=>[r(w,{class:"picker",onChange:j.changevalue,value:[0,0]},{default:o((()=>[r(C,null,{default:o((()=>[(n(!0),p(g,null,h(i.yearlist,((s,t)=>(n(),l(k,{key:t},{default:o((()=>[d(_(s.text),1)])),_:2},1024)))),128))])),_:1}),r(C,null,{default:o((()=>[(n(!0),p(g,null,h(i.ternlist,((s,t)=>(n(),l(k,{key:t},{default:o((()=>[d(_(s.text),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["onChange"]),u("div",{class:"buttonbox"},[u("div",{onClick:t[2]||(t[2]=(...s)=>j.get&&j.get(...s)),style:{"background-color":"#8d89ff",color:"white"},class:"button"},"查询"),u("div",{onClick:t[3]||(t[3]=s=>i.ispop=!1),class:"button"},"取消")])])),_:1},8,["style"])])),_:1})}],["__scopeId","data-v-8465e669"]]);export{v as default};
