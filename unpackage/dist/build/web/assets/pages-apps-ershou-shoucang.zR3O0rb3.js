import{g as s,m as t,x as a,c as e,w as o,i,o as l,a as d,f as r,e as c,b as g,r as u,F as n,B as p,t as f,C as _,u as h,Q as m}from"./index-HXBhxmPW.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=s.importObject("goods",{customUI:!0});const y=x({data:()=>({id:t("userid"),goods:[]}),methods:{async getmystar(){let s=await b.getmystar({userid:this.id});this.goods=s;for(var t=0;t<s.length;t++)if(s[t].star){let a=await b.getGoods(s[t].goodsid);0==a.length?this.goods[t]={star:!1}:(a[0].price="￥"+a[0].price,this.goods[t]={...this.goods[t],...a[0]})}},async unstar(s,t){let e=await b.setstar({goodsid:s._id,userid:this.id,star:!1});a("success"==e?{title:"取消收藏成功"}:{title:"取消收藏失败"}),this.goods.splice(t,1)}},mounted(){this.getmystar()}},[["render",function(s,t,a,x,b,y){const w=i,j=h,v=m;return l(),e(w,{class:"page"},{default:o((()=>[d(w,{class:"topbox"},{default:o((()=>[d(w,{class:"title"},{default:o((()=>[r("我的收藏"),c("i",{class:"bi bi-caret-right-fill"})])),_:1})])),_:1}),d(w,{class:"appbox"},{default:o((()=>[(l(!0),g(n,null,u(b.goods,((s,t)=>p((l(),e(w,{class:"goods"},{default:o((()=>[d(v,{url:"/pages/apps/ershou/xiangqin?id="+s._id},{default:o((()=>[d(j,{class:"goodsimg",mode:"aspectFill",src:s.imgUrl},null,8,["src"]),d(w,{class:"righttext"},{default:o((()=>[d(w,{class:"goodstitle"},{default:o((()=>[r(f(s.title),1)])),_:2},1024),d(w,{class:"goodsprice"},{default:o((()=>[r(f(s.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"]),d(w,{onClick:a=>y.unstar(s,t),class:"star"},{default:o((()=>[r("取消收藏")])),_:2},1032,["onClick"])])),_:2},1536)),[[_,1==s.star]]))),256))])),_:1})])),_:1})}],["__scopeId","data-v-d462e13d"]]);export{y as default};
