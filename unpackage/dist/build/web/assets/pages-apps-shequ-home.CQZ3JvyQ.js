import{g as e,m as s,U as t,j as a,M as l,E as r,c as o,w as i,i as c,o as n,a as u,f,b as d,r as h,F as g,t as m,e as p,K as _,u as b}from"./index-HXBhxmPW.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=e.importObject("community",{customUI:!0});const k=w({data:()=>({items:[],id:s("userid"),current_page:1,refresher:!1,more:!0}),onLoad(){this.getAllNote()},methods:{gotoMyInfo(){t({url:"/pages/apps/shequ/myInfo"})},goto(e){a({url:e})},async refresh(){this.refresher=!0,this.more=!0,this.current_page=1;let e=await y.getNote(null,this.current_page);this.refresher=!1,this.current_page+=1,this.items=e.data},async getAllNote(){if(!this.more)return;let e=await y.getNote(null,this.current_page);this.current_page+=1,this.items=[...this.items,...e.data],e.data.length<7&&(this.more=!1)},goToNew(){a({url:"/pages/apps/shequ/new",success:e=>{},fail:()=>{},complete:()=>{}})},checklogin(){""===this.id&&l({title:"请先登录",success:e=>{r(1),e.confirm&&a({url:"/pages/login/login"})}})}}},[["render",function(e,s,t,a,l,r){const w=c,y=b,k=_;return n(),o(w,{class:"out-box"},{default:i((()=>[u(w,{class:"head"},{default:i((()=>[f(" 校园圈 ")])),_:1}),u(k,{onRefresherrefresh:r.refresh,onScrolltolower:r.getAllNote,"refresher-enabled":"true","refresher-triggered":l.refresher,"scroll-y":"true",class:"outter"},{default:i((()=>[u(w,{class:"cont"},{default:i((()=>[(n(!0),d(g,null,h(l.items,(e=>(n(),o(w,{onClick:s=>r.goto("/pages/apps/shequ/detail?id="+e._id),class:"item"},{default:i((()=>[u(w,{class:"cover"},{default:i((()=>[u(y,{mode:"aspectFill",src:e.cover},null,8,["src"]),u(w,{class:"box"},{default:i((()=>[u(w,null,{default:i((()=>[p("i",{class:"bi bi-eye"}),f(" "+m(e.view),1)])),_:2},1024),u(w,null,{default:i((()=>[p("i",{class:"bi bi-chat-left-text"}),f(" "+m(e.comment.length),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(w,{class:"title"},{default:i((()=>[f(m(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),256)),u(w,{class:"loading"},{default:i((()=>[f(m(l.more?"加载中...":"没有更多了"),1)])),_:1})])),_:1})])),_:1},8,["onRefresherrefresh","onScrolltolower","refresher-triggered"]),u(w,{class:"bottom"},{default:i((()=>[u(w,{class:"item"},{default:i((()=>[f(" 主页 ")])),_:1}),u(w,{onClick:r.goToNew,class:"item sent"},{default:i((()=>[p("i",{class:"bi bi-plus-lg"})])),_:1},8,["onClick"]),u(w,{onClick:r.gotoMyInfo,class:"item"},{default:i((()=>[f(" 我的 ")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-e9cd93df"]]);export{k as default};
